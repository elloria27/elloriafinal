{
  "types": [
    "CREATE TYPE user_role AS ENUM ('admin', 'client', 'moderator')",
    "CREATE TYPE post_status AS ENUM ('draft', 'published', 'archived')",
    "CREATE TYPE component_status AS ENUM ('draft', 'published', 'archived')",
    "CREATE TYPE task_priority AS ENUM ('low', 'medium', 'high')",
    "CREATE TYPE task_status AS ENUM ('todo', 'in_progress', 'done')",
    "CREATE TYPE task_category AS ENUM ('bug', 'feature', 'maintenance', 'other')",
    "CREATE TYPE payment_status AS ENUM ('pending', 'completed', 'failed', 'refunded')",
    "CREATE TYPE invoice_status AS ENUM ('draft', 'pending', 'paid', 'overdue', 'cancelled')",
    "CREATE TYPE notification_type AS ENUM ('task_assigned', 'task_updated', 'deadline_approaching')",
    "CREATE TYPE form_status AS ENUM ('new', 'in_progress', 'completed')",
    "CREATE TYPE form_type AS ENUM ('bulk_consultation', 'custom_solutions', 'business_contact')",
    "CREATE TYPE reminder_recurrence AS ENUM ('none', 'daily', 'weekly', 'monthly')",
    "CREATE TYPE expense_status AS ENUM ('pending', 'approved', 'rejected')",
    "CREATE TYPE page_view_type AS ENUM ('page_view', 'file_view')",
    "CREATE TYPE supported_language AS ENUM ('en', 'fr', 'es')",
    "CREATE TYPE supported_currency AS ENUM ('USD', 'CAD', 'EUR')",
    "CREATE TYPE referral_status AS ENUM ('pending', 'completed', 'expired')",
    "CREATE TYPE flow_intensity AS ENUM ('light', 'medium', 'heavy')",
    "CREATE TYPE symptom_severity AS ENUM ('mild', 'moderate', 'severe')"
  ],
  "tables": [
    "CREATE TABLE IF NOT EXISTS profiles (id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE, email TEXT, full_name TEXT, phone_number TEXT, address TEXT, country TEXT, region TEXT, language supported_language DEFAULT 'en', currency TEXT DEFAULT 'USD', marketing_emails BOOLEAN DEFAULT false, email_notifications BOOLEAN DEFAULT false, completed_initial_setup BOOLEAN DEFAULT false, selected_delivery_method UUID, updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS user_roles (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE, role user_role NOT NULL DEFAULT 'client', created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS blog_categories (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), name TEXT NOT NULL, slug TEXT NOT NULL, parent_id UUID REFERENCES blog_categories(id), created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS blog_comments (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), content TEXT NOT NULL, user_id UUID REFERENCES profiles(id), post_id UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS blog_posts (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), title TEXT NOT NULL, content JSONB NOT NULL DEFAULT '{}'::jsonb, excerpt TEXT, slug TEXT, author_id UUID, status post_status DEFAULT 'draft', featured_image TEXT, meta_title TEXT, meta_description TEXT, keywords TEXT[], view_count INTEGER DEFAULT 0, published_at TIMESTAMP WITH TIME ZONE, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS blog_posts_categories (post_id UUID NOT NULL, category_id UUID NOT NULL, PRIMARY KEY (post_id, category_id))",
    "CREATE TABLE IF NOT EXISTS blog_settings (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), hero_title TEXT NOT NULL DEFAULT 'Stay Inspired with Elloria: News, Insights, and Stories', hero_subtitle TEXT NOT NULL DEFAULT 'Explore the latest updates on feminine care, sustainability, and empowering women', hero_background_image TEXT, instagram_profile_url TEXT DEFAULT 'https://instagram.com', created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS bulk_file_shares (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), file_paths TEXT[] NOT NULL, share_token TEXT NOT NULL, created_by UUID, expires_at TIMESTAMP WITH TIME ZONE, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), access_level TEXT NOT NULL)",
    "CREATE TABLE IF NOT EXISTS business_form_submissions (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), full_name TEXT NOT NULL, company_name TEXT, email TEXT NOT NULL, phone TEXT, message TEXT, inquiry_type TEXT, business_type TEXT, notes TEXT, admin_notes TEXT, form_type form_type NOT NULL, status form_status DEFAULT 'new', attachments JSONB, terms_accepted BOOLEAN DEFAULT false, assigned_to UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), completed_at TIMESTAMP WITH TIME ZONE, assigned_at TIMESTAMP WITH TIME ZONE, last_updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS business_forms (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), message TEXT NOT NULL, inquiry_type TEXT NOT NULL, company_name TEXT NOT NULL, email TEXT NOT NULL, created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS certificates (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), name TEXT NOT NULL, category TEXT NOT NULL, certificate_number TEXT NOT NULL, issuing_authority TEXT NOT NULL, issue_date DATE NOT NULL, expiry_date DATE NOT NULL, image_url TEXT, qr_code_url TEXT, created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS chat_interactions (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), message TEXT NOT NULL, response TEXT NOT NULL, user_id UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS component_definitions (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), name TEXT NOT NULL, type TEXT NOT NULL, category TEXT NOT NULL, description TEXT, icon TEXT, status component_status DEFAULT 'draft', default_props JSONB DEFAULT '{}'::jsonb, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS contact_submissions (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), full_name TEXT NOT NULL, email TEXT NOT NULL, subject TEXT NOT NULL, phone TEXT, message TEXT NOT NULL, newsletter_subscription BOOLEAN DEFAULT false, status TEXT DEFAULT 'pending', created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS content_blocks (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), type TEXT NOT NULL, content JSONB NOT NULL DEFAULT '{}'::jsonb, order_index INTEGER NOT NULL, page_id UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS cycle_settings (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), user_id UUID NOT NULL, cycle_length INTEGER NOT NULL DEFAULT 28, period_length INTEGER NOT NULL DEFAULT 5, last_period_date DATE, notifications_enabled BOOLEAN DEFAULT true, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS delivery_methods (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), name TEXT NOT NULL, description TEXT, estimated_days TEXT, base_price NUMERIC DEFAULT 0, regions TEXT[] DEFAULT '{}'::text[], is_active BOOLEAN DEFAULT true, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS donation_settings (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), title TEXT, description TEXT, icon TEXT, button_text TEXT, button_link TEXT, page_id UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP)",
    "CREATE TABLE IF NOT EXISTS donations (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), amount NUMERIC NOT NULL, currency TEXT DEFAULT 'USD', payment_method TEXT, stripe_session_id TEXT, donor_name TEXT, donor_email TEXT, status TEXT DEFAULT 'completed', created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))"
  ],
  "triggers": [
    "CREATE OR REPLACE FUNCTION public.handle_new_user() RETURNS trigger LANGUAGE plpgsql SECURITY DEFINER AS $function$ BEGIN INSERT INTO public.profiles (id, email, full_name) VALUES (new.id, new.email, COALESCE(new.raw_user_meta_data->>'full_name', '')); INSERT INTO public.user_roles (user_id, role) VALUES (new.id, 'client'); RETURN new; END; $function$",
    "CREATE TRIGGER on_auth_user_created AFTER INSERT ON auth.users FOR EACH ROW EXECUTE FUNCTION public.handle_new_user()"
  ]
}
