
{
  "types": [
    "CREATE TYPE user_role AS ENUM ('admin', 'client', 'moderator')",
    "CREATE TYPE post_status AS ENUM ('draft', 'published', 'archived')",
    "CREATE TYPE component_status AS ENUM ('draft', 'published', 'archived')",
    "CREATE TYPE task_priority AS ENUM ('low', 'medium', 'high')",
    "CREATE TYPE task_status AS ENUM ('todo', 'in_progress', 'done')",
    "CREATE TYPE task_category AS ENUM ('bug', 'feature', 'maintenance', 'other')",
    "CREATE TYPE payment_status AS ENUM ('pending', 'completed', 'failed', 'refunded')",
    "CREATE TYPE invoice_status AS ENUM ('draft', 'pending', 'paid', 'overdue', 'cancelled')",
    "CREATE TYPE notification_type AS ENUM ('task_assigned', 'task_updated', 'deadline_approaching')",
    "CREATE TYPE form_status AS ENUM ('new', 'in_progress', 'completed')",
    "CREATE TYPE form_type AS ENUM ('bulk_consultation', 'custom_solutions', 'business_contact')",
    "CREATE TYPE reminder_recurrence AS ENUM ('none', 'daily', 'weekly', 'monthly')",
    "CREATE TYPE expense_status AS ENUM ('pending', 'approved', 'rejected')",
    "CREATE TYPE page_view_type AS ENUM ('page_view', 'file_view')",
    "CREATE TYPE supported_language AS ENUM ('en', 'fr', 'es')",
    "CREATE TYPE supported_currency AS ENUM ('USD', 'CAD', 'EUR')",
    "CREATE TYPE referral_status AS ENUM ('pending', 'completed', 'expired')",
    "CREATE TYPE flow_intensity AS ENUM ('light', 'medium', 'heavy')",
    "CREATE TYPE symptom_severity AS ENUM ('mild', 'moderate', 'severe')"
  ],
  "tables": [
    "CREATE TABLE IF NOT EXISTS profiles (id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE, email TEXT, full_name TEXT, phone_number TEXT, address TEXT, country TEXT, region TEXT, language supported_language DEFAULT 'en', currency TEXT DEFAULT 'USD', marketing_emails BOOLEAN DEFAULT false, email_notifications BOOLEAN DEFAULT false, completed_initial_setup BOOLEAN DEFAULT false, selected_delivery_method UUID, updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS user_roles (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), user_id UUID NOT NULL REFERENCES auth.users(id) ON DELETE CASCADE, role user_role NOT NULL DEFAULT 'client', created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS blog_categories (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), name TEXT NOT NULL, slug TEXT NOT NULL, parent_id UUID REFERENCES blog_categories(id), created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS blog_comments (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), content TEXT NOT NULL, user_id UUID REFERENCES profiles(id), post_id UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS blog_posts (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), title TEXT NOT NULL, content JSONB NOT NULL DEFAULT '{}'::jsonb, excerpt TEXT, slug TEXT, author_id UUID, status post_status DEFAULT 'draft', featured_image TEXT, meta_title TEXT, meta_description TEXT, keywords TEXT[], view_count INTEGER DEFAULT 0, published_at TIMESTAMP WITH TIME ZONE, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS blog_posts_categories (post_id UUID NOT NULL, category_id UUID NOT NULL, PRIMARY KEY (post_id, category_id))",
    "CREATE TABLE IF NOT EXISTS blog_settings (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), hero_title TEXT NOT NULL DEFAULT 'Stay Inspired with Elloria: News, Insights, and Stories', hero_subtitle TEXT NOT NULL DEFAULT 'Explore the latest updates on feminine care, sustainability, and empowering women', hero_background_image TEXT, instagram_profile_url TEXT DEFAULT 'https://instagram.com', created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS bulk_file_shares (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), file_paths TEXT[] NOT NULL, share_token TEXT NOT NULL, created_by UUID, expires_at TIMESTAMP WITH TIME ZONE, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), access_level TEXT NOT NULL)",
    "CREATE TABLE IF NOT EXISTS business_form_submissions (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), full_name TEXT NOT NULL, company_name TEXT, email TEXT NOT NULL, phone TEXT, message TEXT, inquiry_type TEXT, business_type TEXT, notes TEXT, admin_notes TEXT, form_type form_type NOT NULL, status form_status DEFAULT 'new', attachments JSONB, terms_accepted BOOLEAN DEFAULT false, assigned_to UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), completed_at TIMESTAMP WITH TIME ZONE, assigned_at TIMESTAMP WITH TIME ZONE, last_updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS business_forms (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), message TEXT NOT NULL, inquiry_type TEXT NOT NULL, company_name TEXT NOT NULL, email TEXT NOT NULL, created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS certificates (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), name TEXT NOT NULL, category TEXT NOT NULL, certificate_number TEXT NOT NULL, issuing_authority TEXT NOT NULL, issue_date DATE NOT NULL, expiry_date DATE NOT NULL, image_url TEXT, qr_code_url TEXT, created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS chat_interactions (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), message TEXT NOT NULL, response TEXT NOT NULL, user_id UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS component_definitions (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), name TEXT NOT NULL, type TEXT NOT NULL, category TEXT NOT NULL, description TEXT, icon TEXT, status component_status DEFAULT 'draft', default_props JSONB DEFAULT '{}'::jsonb, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS contact_submissions (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), full_name TEXT NOT NULL, email TEXT NOT NULL, subject TEXT NOT NULL, phone TEXT, message TEXT NOT NULL, newsletter_subscription BOOLEAN DEFAULT false, status TEXT DEFAULT 'pending', created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS content_blocks (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), type TEXT NOT NULL, content JSONB NOT NULL DEFAULT '{}'::jsonb, order_index INTEGER NOT NULL, page_id UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS cycle_settings (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), user_id UUID NOT NULL, cycle_length INTEGER NOT NULL DEFAULT 28, period_length INTEGER NOT NULL DEFAULT 5, last_period_date DATE, notifications_enabled BOOLEAN DEFAULT true, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS delivery_methods (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), name TEXT NOT NULL, description TEXT, estimated_days TEXT, base_price NUMERIC DEFAULT 0, regions TEXT[] DEFAULT '{}'::text[], is_active BOOLEAN DEFAULT true, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS donation_settings (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), title TEXT, description TEXT, icon TEXT, button_text TEXT, button_link TEXT, page_id UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP)",
    "CREATE TABLE IF NOT EXISTS donations (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), amount NUMERIC NOT NULL, currency TEXT DEFAULT 'USD', payment_method TEXT, stripe_session_id TEXT, donor_name TEXT, donor_email TEXT, status TEXT DEFAULT 'completed', created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS file_shares (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), file_path TEXT NOT NULL, folder_path TEXT, share_token TEXT NOT NULL, created_by UUID, expires_at TIMESTAMP WITH TIME ZONE, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), access_level TEXT NOT NULL)",
    "CREATE TABLE IF NOT EXISTS folders (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), name TEXT NOT NULL, path TEXT NOT NULL, parent_path TEXT, created_by UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS hrm_checklist_items (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), checklist_id UUID NOT NULL, content TEXT NOT NULL, completed BOOLEAN DEFAULT false, order_index INTEGER NOT NULL, created_by UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), last_updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP)",
    "CREATE TABLE IF NOT EXISTS hrm_credit_notes (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), customer_id UUID, invoice_id UUID, amount NUMERIC NOT NULL, credit_note_number TEXT NOT NULL, reason TEXT, status TEXT NOT NULL DEFAULT 'issued', created_by UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), updated_at TIMESTAMP WITH TIME ZONE DEFAULT now())",
    "CREATE TABLE IF NOT EXISTS hrm_customer_payment_methods (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), customer_id UUID, type TEXT NOT NULL, details JSONB NOT NULL, is_default BOOLEAN DEFAULT false, created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), updated_at TIMESTAMP WITH TIME ZONE DEFAULT now())",
    "CREATE TABLE IF NOT EXISTS hrm_customers (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), name TEXT NOT NULL, email TEXT NOT NULL, phone TEXT, address JSONB, tax_id TEXT, created_by UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), updated_at TIMESTAMP WITH TIME ZONE DEFAULT now())",
    "CREATE TABLE IF NOT EXISTS hrm_estimate_items (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), estimate_id UUID, description TEXT NOT NULL, quantity INTEGER NOT NULL DEFAULT 1, unit_price NUMERIC NOT NULL, tax_percentage NUMERIC DEFAULT 0, total_price NUMERIC NOT NULL, created_at TIMESTAMP WITH TIME ZONE DEFAULT now())",
    "CREATE TABLE IF NOT EXISTS hrm_estimates (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), customer_id UUID, estimate_number TEXT NOT NULL, subtotal_amount NUMERIC NOT NULL DEFAULT 0, tax_amount NUMERIC NOT NULL DEFAULT 0, total_amount NUMERIC NOT NULL DEFAULT 0, status TEXT NOT NULL DEFAULT 'draft', terms TEXT, notes TEXT, valid_until DATE, created_by UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), updated_at TIMESTAMP WITH TIME ZONE DEFAULT now())",
    "CREATE TABLE IF NOT EXISTS hrm_expense_categories (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), name TEXT NOT NULL, description TEXT, created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), updated_at TIMESTAMP WITH TIME ZONE DEFAULT now())",
    "CREATE TABLE IF NOT EXISTS hrm_invoice_emails (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), invoice_id UUID, sent_to TEXT NOT NULL, sent_by UUID, sent_at TIMESTAMP WITH TIME ZONE DEFAULT now(), status TEXT NOT NULL DEFAULT 'sent', email_type TEXT NOT NULL DEFAULT 'invoice', template_version TEXT, error_message TEXT)",
    "CREATE TABLE IF NOT EXISTS hrm_invoice_items (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), invoice_id UUID, description TEXT NOT NULL, quantity INTEGER NOT NULL DEFAULT 1, unit_price NUMERIC NOT NULL, tax_percentage NUMERIC DEFAULT 0, total_price NUMERIC NOT NULL, tax_category_id UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT now())",
    "CREATE TABLE IF NOT EXISTS hrm_invoice_payments (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), invoice_id UUID, amount_paid NUMERIC NOT NULL, payment_method TEXT NOT NULL, payment_date TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(), status payment_status NOT NULL DEFAULT 'pending', transaction_id TEXT, created_by UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT now())",
    "CREATE TABLE IF NOT EXISTS hrm_invoice_settings (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), company_id UUID, invoice_template TEXT DEFAULT 'standard', company_info JSONB DEFAULT '{}'::jsonb, payment_instructions TEXT, default_notes TEXT, footer_text TEXT, late_fee_percentage NUMERIC DEFAULT 0, default_due_days INTEGER DEFAULT 30, logo_url TEXT, company_email TEXT, company_phone TEXT, created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), updated_at TIMESTAMP WITH TIME ZONE DEFAULT now())",
    "CREATE TABLE IF NOT EXISTS hrm_invoices (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), customer_id UUID, employee_id UUID, invoice_number TEXT NOT NULL, total_amount NUMERIC NOT NULL DEFAULT 0, subtotal_amount NUMERIC NOT NULL DEFAULT 0, tax_amount NUMERIC NOT NULL DEFAULT 0, total_amount_with_tax NUMERIC DEFAULT 0, discount_amount NUMERIC DEFAULT 0, shipping_amount NUMERIC DEFAULT 0, status invoice_status NOT NULL DEFAULT 'pending', due_date DATE NOT NULL, payment_terms TEXT, notes TEXT, reference_number TEXT, company_info JSONB DEFAULT '{}'::jsonb, tax_details JSONB DEFAULT '{}'::jsonb, discount_type TEXT, currency TEXT NOT NULL DEFAULT 'CAD', late_fee_percentage NUMERIC DEFAULT 0, footer_text TEXT, payment_instructions TEXT, template_version TEXT DEFAULT '1.0', pdf_url TEXT, last_sent_at TIMESTAMP WITH TIME ZONE, last_sent_to TEXT, created_by UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), updated_at TIMESTAMP WITH TIME ZONE DEFAULT now())",
    "CREATE TABLE IF NOT EXISTS hrm_personal_reminders (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), admin_id UUID NOT NULL, title TEXT NOT NULL, description TEXT, reminder_date DATE NOT NULL, reminder_time TIME NOT NULL, recurrence reminder_recurrence NOT NULL DEFAULT 'none', email_notify BOOLEAN NOT NULL DEFAULT true, status BOOLEAN NOT NULL DEFAULT true, created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now(), updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT now())",
    "CREATE TABLE IF NOT EXISTS hrm_recurring_invoices (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), customer_id UUID, start_date DATE NOT NULL, end_date DATE, frequency TEXT NOT NULL, template_data JSONB NOT NULL, is_active BOOLEAN DEFAULT true, next_generation TIMESTAMP WITH TIME ZONE, last_generated TIMESTAMP WITH TIME ZONE, created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), updated_at TIMESTAMP WITH TIME ZONE DEFAULT now())",
    "CREATE TABLE IF NOT EXISTS hrm_subtasks (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), task_id UUID NOT NULL, title TEXT NOT NULL, completed BOOLEAN DEFAULT false, order_index INTEGER NOT NULL, created_by UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), last_updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP)",
    "CREATE TABLE IF NOT EXISTS hrm_task_attachments (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), task_id UUID NOT NULL, file_name TEXT NOT NULL, file_path TEXT NOT NULL, uploaded_by UUID NOT NULL, created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP)",
    "CREATE TABLE IF NOT EXISTS hrm_task_checklists (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), task_id UUID, title TEXT NOT NULL, order_index INTEGER NOT NULL, created_by UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), last_updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP)",
    "CREATE TABLE IF NOT EXISTS hrm_task_comments (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), task_id UUID NOT NULL, comment TEXT NOT NULL, created_by UUID NOT NULL, created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP)",
    "CREATE TABLE IF NOT EXISTS hrm_task_history (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), task_id UUID NOT NULL, action TEXT NOT NULL, changed_by UUID NOT NULL, old_value JSONB, new_value JSONB, created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP)",
    "CREATE TABLE IF NOT EXISTS hrm_task_label_assignments (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), task_id UUID, label_id UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT now())",
    "CREATE TABLE IF NOT EXISTS hrm_task_labels (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), name TEXT NOT NULL, color TEXT NOT NULL, created_by UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT now())",
    "CREATE TABLE IF NOT EXISTS hrm_task_notifications (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), task_id UUID, user_id UUID, message TEXT NOT NULL, notification_type notification_type NOT NULL, is_read BOOLEAN DEFAULT false, email_sent BOOLEAN DEFAULT false, created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), updated_at TIMESTAMP WITH TIME ZONE DEFAULT now())",
    "CREATE TABLE IF NOT EXISTS hrm_tasks (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), title TEXT NOT NULL, description TEXT, status task_status NOT NULL DEFAULT 'todo', priority task_priority NOT NULL DEFAULT 'medium', category task_category NOT NULL DEFAULT 'other', assigned_to UUID NOT NULL, created_by UUID NOT NULL, due_date TIMESTAMP WITH TIME ZONE, start_date TIMESTAMP WITH TIME ZONE, completion_date TIMESTAMP WITH TIME ZONE, estimated_hours NUMERIC DEFAULT 0, actual_hours NUMERIC DEFAULT 0, created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP, last_updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP)",
    "CREATE TABLE IF NOT EXISTS inventory (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), product_id UUID NOT NULL, quantity INTEGER NOT NULL DEFAULT 0, low_stock_threshold INTEGER DEFAULT 100, reorder_point INTEGER DEFAULT 50, optimal_stock INTEGER DEFAULT 200, unit_cost NUMERIC DEFAULT 0, sku TEXT, location TEXT, last_counted_at TIMESTAMP WITH TIME ZONE, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS inventory_logs (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), product_id UUID NOT NULL, quantity_change INTEGER NOT NULL, previous_quantity INTEGER NOT NULL, new_quantity INTEGER NOT NULL, reason_type TEXT NOT NULL, reason_details TEXT, adjustment_type TEXT, reference_number TEXT, performed_by TEXT, unit_cost NUMERIC, total_cost NUMERIC, location TEXT, retailer_name TEXT, created_by UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS orders (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), user_id UUID, profile_id UUID, order_number TEXT NOT NULL, items JSONB NOT NULL, shipping_address JSONB NOT NULL, billing_address JSONB NOT NULL, total_amount NUMERIC NOT NULL, shipping_cost NUMERIC DEFAULT 0, gst NUMERIC DEFAULT 0, status TEXT NOT NULL, payment_method TEXT, stripe_session_id TEXT, applied_promo_code JSONB, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS page_views (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), session_id TEXT NOT NULL, page_path TEXT NOT NULL, visitor_ip TEXT, user_agent TEXT, referrer TEXT, country TEXT, city TEXT, view_type page_view_type DEFAULT 'page_view', created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS pages (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), title TEXT NOT NULL, slug TEXT NOT NULL, content JSONB NOT NULL DEFAULT '[]'::jsonb, content_blocks JSONB[] DEFAULT '{}'::jsonb[], is_published BOOLEAN DEFAULT false, show_in_header BOOLEAN DEFAULT false, show_in_footer BOOLEAN DEFAULT false, parent_id UUID, menu_order INTEGER DEFAULT 0, page_template TEXT DEFAULT 'default', menu_type TEXT DEFAULT 'main', meta_title TEXT, meta_description TEXT, meta_keywords TEXT, canonical_url TEXT, custom_canonical_url TEXT, og_title TEXT, og_description TEXT, og_image TEXT, meta_robots TEXT, redirect_url TEXT, allow_indexing BOOLEAN DEFAULT true, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS payment_methods (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), name TEXT NOT NULL, description TEXT, icon_url TEXT, processing_fee NUMERIC DEFAULT 0, stripe_config JSONB DEFAULT '{\"secret_key\": \"\", \"publishable_key\": \"\"}'::jsonb, is_active BOOLEAN DEFAULT true, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS period_logs (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), user_id UUID NOT NULL, date DATE NOT NULL, flow_intensity flow_intensity NOT NULL, notes TEXT, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS products (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), name TEXT NOT NULL, description TEXT NOT NULL, price NUMERIC NOT NULL, image TEXT NOT NULL, features TEXT[] NOT NULL DEFAULT '{}', specifications JSONB NOT NULL DEFAULT '{}'::jsonb, media JSONB DEFAULT '[]'::jsonb, why_choose_features JSONB DEFAULT '[]'::jsonb, slug TEXT NOT NULL, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS promo_codes (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), code TEXT NOT NULL, type TEXT NOT NULL, value NUMERIC NOT NULL, min_purchase_amount NUMERIC DEFAULT 0, max_uses INTEGER, uses_count INTEGER DEFAULT 0, start_date TIMESTAMP WITH TIME ZONE, end_date TIMESTAMP WITH TIME ZONE, is_active BOOLEAN DEFAULT true, description TEXT, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS referral_tracking (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), referral_id UUID, referred_email TEXT NOT NULL, status referral_status DEFAULT 'pending', utm_source TEXT, utm_medium TEXT, utm_campaign TEXT, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS referrals (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), referrer_id UUID, referral_code TEXT NOT NULL, referral_count INTEGER DEFAULT 0, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS reminders (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), user_id UUID NOT NULL, title TEXT NOT NULL, description TEXT, reminder_type TEXT NOT NULL, time TIME NOT NULL, days_before INTEGER, is_enabled BOOLEAN DEFAULT true, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS reviews (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), user_id UUID NOT NULL, rating INTEGER NOT NULL, content TEXT, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS seo_settings (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), default_title_template TEXT, default_meta_description TEXT, default_meta_keywords TEXT, google_site_verification TEXT, robots_txt TEXT, created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS shop_company_expenses (id UUID PRIMARY KEY DEFAULT gen_random_uuid(), title TEXT NOT NULL, amount NUMERIC NOT NULL, date DATE NOT NULL, category TEXT NOT NULL, vendor_name TEXT NOT NULL, payment_method TEXT NOT NULL, status expense_status NOT NULL DEFAULT 'pending', notes TEXT, receipt_path TEXT, created_by UUID, created_at TIMESTAMP WITH TIME ZONE DEFAULT now(), updated_at TIMESTAMP WITH TIME ZONE DEFAULT now())",
    "CREATE TABLE IF NOT EXISTS shop_settings (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), default_currency supported_currency NOT NULL DEFAULT 'USD', payment_methods JSONB DEFAULT '{\"stripe\": false, \"cash_on_delivery\": true}'::jsonb, stripe_settings JSONB DEFAULT '{\"secret_key\": \"\", \"publishable_key\": \"\"}'::jsonb, shipping_methods JSONB DEFAULT '{\"CA\": [], \"US\": []}'::jsonb, tax_settings JSONB DEFAULT '{\"CA\": {\"provinces\": {\"Quebec\": {\"gst\": 5, \"pst\": 9.975}, \"Alberta\": {\"gst\": 5, \"pst\": 0}, \"Ontario\": {\"hst\": 13}, \"Manitoba\": {\"gst\": 5, \"pst\": 7}, \"Nova Scotia\": {\"hst\": 15}, \"Saskatchewan\": {\"gst\": 5, \"pst\": 6}, \"New Brunswick\": {\"hst\": 15}, \"British Columbia\": {\"gst\": 5, \"pst\": 7}, \"Prince Edward Island\": {\"hst\": 15}, \"Newfoundland and Labrador\": {\"hst\": 15}}}, \"US\": {\"states\": {}}}'::jsonb, enable_guest_checkout BOOLEAN DEFAULT true, min_order_amount NUMERIC DEFAULT 0, max_order_amount NUMERIC, tax_rate NUMERIC DEFAULT 0, shipping_countries TEXT[] DEFAULT ARRAY['US', 'CA'], created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS site_settings (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), site_title TEXT NOT NULL DEFAULT 'My Website', logo_url TEXT, favicon_url TEXT, google_analytics_id TEXT, contact_email TEXT, homepage_slug TEXT DEFAULT '', meta_description TEXT, meta_keywords TEXT, default_language supported_language NOT NULL DEFAULT 'en', enable_registration BOOLEAN NOT NULL DEFAULT true, enable_search_indexing BOOLEAN NOT NULL DEFAULT true, custom_scripts JSONB DEFAULT '[]'::jsonb, maintenance_mode BOOLEAN DEFAULT false, enable_cookie_consent BOOLEAN DEFAULT false, enable_https_redirect BOOLEAN DEFAULT false, max_upload_size INTEGER DEFAULT 10, enable_user_avatars BOOLEAN DEFAULT false, created_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS subscriptions (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), email TEXT NOT NULL, source TEXT, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS symptom_logs (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), user_id UUID NOT NULL, symptom_id UUID NOT NULL, severity symptom_severity NOT NULL, date DATE NOT NULL, notes TEXT, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()), updated_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))",
    "CREATE TABLE IF NOT EXISTS symptoms (id UUID PRIMARY KEY DEFAULT uuid_generate_v4(), name TEXT NOT NULL, category TEXT, icon TEXT, created_at TIMESTAMP WITH TIME ZONE DEFAULT timezone('utc'::text, now()))"
  ],
  "triggers": [
    "CREATE OR REPLACE FUNCTION public.handle_new_user() RETURNS trigger LANGUAGE plpgsql SECURITY DEFINER AS $function$ BEGIN INSERT INTO public.profiles (id, email, full_name) VALUES (new.id, new.email, COALESCE(new.raw_user_meta_data->>'full_name', '')); INSERT INTO public.user_roles (user_id, role) VALUES (new.id, 'client'); RETURN new; END; $function$",
    "CREATE TRIGGER on_auth_user_created AFTER INSERT ON auth.users FOR EACH ROW EXECUTE FUNCTION public.handle_new_user()"
  ]
}
